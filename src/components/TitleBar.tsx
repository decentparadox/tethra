"use client"
import { Window } from '@tauri-apps/api/window';
const appWindow = new Window('tethra');

// when using `"withGlobalTauri": true`, you may use
//@ts-ignore
// Avoid top-level `window` access; Tauri is accessed lazily in handlers

export default function TitleBar(){
	// const getAppWindow = () => {
	// 	if (typeof window === 'undefined') return null;
	// 	console.log(typeof window)
	// 	// @ts-ignore
	// 	const tauriWindowApi = (window as any).__TAURI__?.window;
	// 	return tauriWindowApi?.getCurrentWindow?.() ?? null;
	// };
	
	const minimizeWindow = async () => {
        await appWindow.minimize();
    }

    const maximizeWindow = async () => {
        await appWindow.toggleMaximize();
    }
    
    const closeWindow = async () => {
        await appWindow.close();
    }

    return (
		<div data-tauri-drag-region className="titlebar">
			<div data-tauri-drag-region></div>
			<div className="controls">
			  <button id="titlebar-minimize" title="minimize" onClick={()=>minimizeWindow()}>
				<svg width="16" height="1" viewBox="0 0 16 1" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M15.875 0.500488C15.875 0.633097 15.8092 0.760274 15.6919 0.854042C15.5747 0.94781 15.4158 1.00049 15.25 1.00049H1.5C1.33424 1.00049 1.17527 0.94781 1.05806 0.854042C0.940848 0.760274 0.875 0.633097 0.875 0.500488C0.875 0.36788 0.940848 0.240703 1.05806 0.146935C1.17527 0.0531668 1.33424 0.000488281 1.5 0.000488281H15.25C15.4158 0.000488281 15.5747 0.0531668 15.6919 0.146935C15.8092 0.240703 15.875 0.36788 15.875 0.500488Z" fill="white" fill-opacity="0.5"/>
				</svg>
			  </button>
			  <button id="titlebar-maximize" title="maximize" onClick={()=>maximizeWindow()}>
			  <svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
<path opacity="0.5" d="M15.875 0.682306V4.77322C15.875 4.95405 15.8032 5.12747 15.6753 5.25533C15.5474 5.3832 15.374 5.45503 15.1932 5.45503C15.0124 5.45503 14.8389 5.3832 14.7111 5.25533C14.5832 5.12747 14.5114 4.95405 14.5114 4.77322V2.32804L10.221 6.61924C10.0931 6.74718 9.91957 6.81905 9.73864 6.81905C9.55771 6.81905 9.38419 6.74718 9.25625 6.61924C9.12831 6.4913 9.05644 6.31778 9.05644 6.13685C9.05644 5.95592 9.12831 5.7824 9.25625 5.65447L13.5474 1.36412H11.1023C10.9214 1.36412 10.748 1.29229 10.6202 1.16442C10.4923 1.03656 10.4205 0.863136 10.4205 0.682306C10.4205 0.501477 10.4923 0.328054 10.6202 0.200188C10.748 0.0723226 10.9214 0.000488281 11.1023 0.000488281H15.1932C15.374 0.000488281 15.5474 0.0723226 15.6753 0.200188C15.8032 0.328054 15.875 0.501477 15.875 0.682306ZM6.52898 8.38174L2.23864 12.6729V10.2278C2.23864 10.0469 2.1668 9.87351 2.03894 9.74564C1.91107 9.61778 1.73765 9.54594 1.55682 9.54594C1.37599 9.54594 1.20257 9.61778 1.0747 9.74564C0.946834 9.87351 0.875 10.0469 0.875 10.2278V14.3187C0.875 14.4995 0.946834 14.6729 1.0747 14.8008C1.20257 14.9287 1.37599 15.0005 1.55682 15.0005H5.64773C5.82856 15.0005 6.00198 14.9287 6.12985 14.8008C6.25771 14.6729 6.32955 14.4995 6.32955 14.3187C6.32955 14.1378 6.25771 13.9644 6.12985 13.8366C6.00198 13.7087 5.82856 13.6369 5.64773 13.6369H3.20256L7.49375 9.34651C7.62169 9.21858 7.69356 9.04505 7.69356 8.86412C7.69356 8.68319 7.62169 8.50967 7.49375 8.38174C7.36581 8.2538 7.19229 8.18193 7.01136 8.18193C6.83043 8.18193 6.65691 8.2538 6.52898 8.38174Z" fill="white"/>
</svg>

			  </button>
			  <button id="titlebar-close" title="close" onClick={()=>closeWindow()}>
			  	<svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
<path opacity="0.5" d="M15.656 13.7198C15.7257 13.7895 15.781 13.8722 15.8187 13.9632C15.8564 14.0543 15.8758 14.1519 15.8758 14.2504C15.8758 14.349 15.8564 14.4465 15.8187 14.5376C15.781 14.6286 15.7257 14.7114 15.656 14.781C15.5864 14.8507 15.5036 14.906 15.4126 14.9437C15.3215 14.9814 15.224 15.0008 15.1254 15.0008C15.0269 15.0008 14.9293 14.9814 14.8382 14.9437C14.7472 14.906 14.6645 14.8507 14.5948 14.781L8.37542 8.56073L2.15604 14.781C2.01531 14.9218 1.82444 15.0008 1.62542 15.0008C1.42639 15.0008 1.23552 14.9218 1.09479 14.781C0.954062 14.6403 0.875 14.4494 0.875 14.2504C0.875 14.0514 0.954062 13.8605 1.09479 13.7198L7.3151 7.50042L1.09479 1.28104C0.954062 1.14031 0.875 0.94944 0.875 0.750417C0.875 0.551394 0.954062 0.360523 1.09479 0.219792C1.23552 0.0790615 1.42639 0 1.62542 0C1.82444 0 2.01531 0.0790615 2.15604 0.219792L8.37542 6.4401L14.5948 0.219792C14.7355 0.0790615 14.9264 -3.92322e-09 15.1254 0C15.3244 3.92322e-09 15.5153 0.0790615 15.656 0.219792C15.7968 0.360523 15.8758 0.551394 15.8758 0.750417C15.8758 0.94944 15.7968 1.14031 15.656 1.28104L9.43573 7.50042L15.656 13.7198Z" fill="white"/>
</svg>
			  </button>
			</div>
		  </div>
    )
}